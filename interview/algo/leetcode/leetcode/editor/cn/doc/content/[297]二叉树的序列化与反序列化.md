<p>åºåˆ—åŒ–æ˜¯å°†ä¸€ä¸ªæ•°æ®ç»“æ„æˆ–è€…å¯¹è±¡è½¬æ¢ä¸ºè¿ç»­çš„æ¯”ç‰¹ä½çš„æ“ä½œï¼Œè¿›è€Œå¯ä»¥å°†è½¬æ¢åçš„æ•°æ®å­˜å‚¨åœ¨ä¸€ä¸ªæ–‡ä»¶æˆ–è€…å†…å­˜ä¸­ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥é€šè¿‡ç½‘ç»œä¼ è¾“åˆ°å¦ä¸€ä¸ªè®¡ç®—æœºç¯å¢ƒï¼Œé‡‡å–ç›¸åæ–¹å¼é‡æ„å¾—åˆ°åŸæ•°æ®ã€‚</p>

<p>è¯·è®¾è®¡ä¸€ä¸ªç®—æ³•æ¥å®ç°äºŒå‰æ ‘çš„åºåˆ—åŒ–ä¸ååºåˆ—åŒ–ã€‚è¿™é‡Œä¸é™å®šä½ çš„åºåˆ— / ååºåˆ—åŒ–ç®—æ³•æ‰§è¡Œé€»è¾‘ï¼Œä½ åªéœ€è¦ä¿è¯ä¸€ä¸ªäºŒå‰æ ‘å¯ä»¥è¢«åºåˆ—åŒ–ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”å°†è¿™ä¸ªå­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºåŸå§‹çš„æ ‘ç»“æ„ã€‚</p>

<p><strong>æç¤º: </strong>è¾“å…¥è¾“å‡ºæ ¼å¼ä¸ LeetCode ç›®å‰ä½¿ç”¨çš„æ–¹å¼ä¸€è‡´ï¼Œè¯¦æƒ…è¯·å‚é˜…&nbsp;<a href="https://support.leetcode.cn/hc/kb/article/1567641/">LeetCode åºåˆ—åŒ–äºŒå‰æ ‘çš„æ ¼å¼</a>ã€‚ä½ å¹¶éå¿…é¡»é‡‡å–è¿™ç§æ–¹å¼ï¼Œä½ ä¹Ÿå¯ä»¥é‡‡ç”¨å…¶ä»–çš„æ–¹æ³•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚</p>

<p>&nbsp;</p>

<p><strong>ç¤ºä¾‹ 1ï¼š</strong></p> 
<img alt="" src="https://assets.leetcode.com/uploads/2020/09/15/serdeser.jpg" style="width: 442px; height: 324px;" /> 
<pre>
<strong>è¾“å…¥ï¼š</strong>root = [1,2,3,null,null,4,5]
<strong>è¾“å‡ºï¼š</strong>[1,2,3,null,null,4,5]
</pre>

<p><strong>ç¤ºä¾‹ 2ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>root = []
<strong>è¾“å‡ºï¼š</strong>[]
</pre>

<p><strong>ç¤ºä¾‹ 3ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>root = [1]
<strong>è¾“å‡ºï¼š</strong>[1]
</pre>

<p><strong>ç¤ºä¾‹ 4ï¼š</strong></p>

<pre>
<strong>è¾“å…¥ï¼š</strong>root = [1,2]
<strong>è¾“å‡ºï¼š</strong>[1,2]
</pre>

<p>&nbsp;</p>

<p><strong>æç¤ºï¼š</strong></p>

<ul> 
 <li>æ ‘ä¸­ç»“ç‚¹æ•°åœ¨èŒƒå›´ <code>[0, 10<sup>4</sup>]</code> å†…</li> 
 <li><code>-1000 &lt;= Node.val &lt;= 1000</code></li> 
</ul>

<details><summary><strong>Related Topics</strong></summary>æ ‘ | æ·±åº¦ä¼˜å…ˆæœç´¢ | å¹¿åº¦ä¼˜å…ˆæœç´¢ | è®¾è®¡ | å­—ç¬¦ä¸² | äºŒå‰æ ‘</details><br>

<div>ğŸ‘ 1246, ğŸ‘ 0<span style='float: right;'><span style='color: gray;'><a href='https://github.com/labuladong/fucking-algorithm/issues' target='_blank' style='color: lightgray;text-decoration: underline;'>bug åé¦ˆ</a> | <a href='https://labuladong.online/algo/fname.html?fname=jbæ’ä»¶ç®€ä»‹' target='_blank' style='color: lightgray;text-decoration: underline;'>ä½¿ç”¨æŒ‡å—</a> | <a href='https://labuladong.online/algo/' target='_blank' style='color: lightgray;text-decoration: underline;'>æ›´å¤šé…å¥—æ’ä»¶</a></span></span></div>

<div id="labuladong"><hr>

**é€šçŸ¥ï¼šå·²å®Œæˆç½‘ç«™æ•™ç¨‹ã€ç½‘ç«™ä¹ é¢˜ã€é…å¥—æ’ä»¶ä¸­æ‰€æœ‰å¤šè¯­è¨€ä»£ç çš„æ ¡å‡†ï¼Œè§£å†³äº†ä¹‹å‰ chatGPT ç¿»è¯‘å¯èƒ½å‡ºé”™çš„é—®é¢˜~**



<p><strong><a href="https://labuladong.online/algo/slug.html?slug=serialize-and-deserialize-binary-tree" target="_blank">â­ï¸labuladong é¢˜è§£</a></strong></p>
<details><summary><strong>labuladong æ€è·¯</strong></summary>

<div id="labuladong_solution_zh">

## åŸºæœ¬æ€è·¯

åºåˆ—åŒ–é—®é¢˜å…¶å®å°±æ˜¯éå†é—®é¢˜ï¼Œä½ èƒ½éå†ï¼Œé¡ºæ‰‹æŠŠéå†çš„ç»“æœè½¬åŒ–æˆå­—ç¬¦ä¸²çš„å½¢å¼ï¼Œä¸å°±æ˜¯åºåˆ—åŒ–äº†ä¹ˆï¼Ÿ

è¿™é‡Œæˆ‘å°±ç®€å•è¯´è¯´ç”¨å‰åºéå†çš„æ€è·¯ï¼Œå‰åºéå†çš„ç‰¹ç‚¹æ˜¯æ ¹èŠ‚ç‚¹åœ¨å¼€å¤´ï¼Œç„¶åæ¥ç€å·¦å­æ ‘çš„å‰åºéå†ç»“æœï¼Œç„¶åæ¥ç€å³å­æ ‘çš„å‰åºéå†ç»“æœï¼š

![](https://labuladong.online/algo/images/äºŒå‰æ ‘åºåˆ—åŒ–/1.jpeg)

æ‰€ä»¥å¦‚æœæŒ‰ç…§å‰åºéå†é¡ºåºè¿›è¡Œåºåˆ—åŒ–ï¼Œååºåˆ—åŒ–çš„æ—¶å€™ï¼Œå°±çŸ¥é“ç¬¬ä¸€ä¸ªå…ƒç´ æ˜¯æ ¹èŠ‚ç‚¹çš„å€¼ï¼Œç„¶åé€’å½’è°ƒç”¨ååºåˆ—åŒ–å·¦å³å­æ ‘ï¼Œæ¥åˆ°æ ¹èŠ‚ç‚¹ä¸Šå³å¯ï¼Œä¸Šè¿°æ€è·¯ç¿»è¯‘æˆä»£ç å³å¯è§£å†³æœ¬é¢˜ã€‚

å½“ç„¶ï¼Œè¿™é¢˜ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨äºŒå‰æ ‘çš„ä¸­åºã€ååºã€å±‚åºçš„éå†æ–¹å¼æ¥åšï¼Œå…·ä½“å¯çœ‹è¯¦ç»†é¢˜è§£ã€‚

**è¯¦ç»†é¢˜è§£ï¼š[äºŒå‰æ ‘å¿ƒæ³•ï¼ˆåºåˆ—åŒ–ç¯‡ï¼‰](https://labuladong.online/algo/data-structure/serialize-and-deserialize-binary-tree/)**

</div>

**æ ‡ç­¾ï¼š[äºŒå‰æ ‘](https://labuladong.online/algo/)ï¼Œ[æ•°æ®ç»“æ„](https://labuladong.online/algo/)ï¼Œé€’å½’**

<div id="solution">

## è§£æ³•ä»£ç 



<div class="tab-panel"><div class="tab-nav">
<button data-tab-item="cpp" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">cppğŸ¤–</button>

<button data-tab-item="python" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">pythonğŸ¤–</button>

<button data-tab-item="java" class="tab-nav-button btn active" data-tab-group="default" onclick="switchTab(this)">javağŸŸ¢</button>

<button data-tab-item="go" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">goğŸ¤–</button>

<button data-tab-item="javascript" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">javascriptğŸ¤–</button>
</div><div class="tab-content">
<div data-tab-item="cpp" class="tab-item " data-tab-group="default"><div class="highlight">

```cpp
// æ³¨æ„ï¼šcpp ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ã€‚
// æœ¬ä»£ç çš„æ­£ç¡®æ€§å·²é€šè¿‡åŠ›æ‰£éªŒè¯ï¼Œä½†å¯èƒ½ç¼ºå¤±æ³¨é‡Šã€‚å¿…è¦æ—¶è¯·å¯¹ç…§æˆ‘çš„ java ä»£ç æŸ¥çœ‹ã€‚

class Codec {
    string SEP;
    string NULL_NODE;

public:
    Codec() : SEP(","), NULL_NODE("#") {}

    // ä¸»å‡½æ•°ï¼Œå°†äºŒå‰æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²
    string serialize(TreeNode* root) {
        stringstream ss;
        serialize(root, ss);
        return ss.str();
    }

    // è¾…åŠ©å‡½æ•°ï¼Œå°†äºŒå‰æ ‘å­˜å…¥ StringBuilder
    void serialize(TreeNode* root, stringstream& ss) {
        if (root == nullptr) {
            ss << NULL_NODE << SEP;
            return;
        }

        // *****å‰åºéå†ä½ç½®*****
        ss << root->val << SEP;
        // *********************

        serialize(root->left, ss);
        serialize(root->right, ss);
    }

    // ä¸»å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„
    TreeNode* deserialize(string data) {
        // å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
        list<string> nodes;
        stringstream ss(data);
        string item;
        while (getline(ss, item, ',')) {
            nodes.push_back(item);
        }
        return deserialize(nodes);
    }

    // è¾…åŠ©å‡½æ•°ï¼Œé€šè¿‡ nodes åˆ—è¡¨æ„é€ äºŒå‰æ ‘
    TreeNode* deserialize(list<string>& nodes) {
        if (nodes.empty()) return nullptr;

        // *****å‰åºéå†ä½ç½®*****
        // åˆ—è¡¨æœ€å·¦ä¾§å°±æ˜¯æ ¹èŠ‚ç‚¹
        string first = nodes.front();
        nodes.pop_front();
        if (first == NULL_NODE) return nullptr;
        TreeNode* root = new TreeNode(stoi(first));
        // *********************

        root->left = deserialize(nodes);
        root->right = deserialize(nodes);

        return root;
    }
};
```

</div></div>

<div data-tab-item="python" class="tab-item " data-tab-group="default"><div class="highlight">

```python
# æ³¨æ„ï¼špython ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ã€‚
# æœ¬ä»£ç çš„æ­£ç¡®æ€§å·²é€šè¿‡åŠ›æ‰£éªŒè¯ï¼Œä½†å¯èƒ½ç¼ºå¤±æ³¨é‡Šã€‚å¿…è¦æ—¶è¯·å¯¹ç…§æˆ‘çš„ java ä»£ç æŸ¥çœ‹ã€‚

class Codec:
    SEP = ","
    NULL = "#"

    # ä¸»å‡½æ•°ï¼Œå°†äºŒå‰æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²
    def serialize(self, root: TreeNode) -> str:
        sb = []
        self._serialize(root, sb)
        return ''.join(sb)

    # è¾…åŠ©å‡½æ•°ï¼Œå°†äºŒå‰æ ‘å­˜å…¥ StringBuilder
    def _serialize(self, root: TreeNode, sb: list):
        if root is None:
            sb.append(self.NULL + self.SEP)
            return

        # *****å‰åºéå†ä½ç½®*****
        sb.append(str(root.val) + self.SEP)
        # *********************

        self._serialize(root.left, sb)
        self._serialize(root.right, sb)

    # ä¸»å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„
    def deserialize(self, data: str) -> TreeNode:
        # å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
        nodes = data.split(self.SEP)
        nodes = deque(nodes)  # ä½¿ç”¨ deque ä»¥ä¾¿é«˜æ•ˆåœ°ä»å·¦ä¾§å¼¹å‡ºå…ƒç´ 
        return self._deserialize(nodes)

    # è¾…åŠ©å‡½æ•°ï¼Œé€šè¿‡ nodes åˆ—è¡¨æ„é€ äºŒå‰æ ‘
    def _deserialize(self, nodes: deque) -> TreeNode:
        if not nodes:
            return None

        # *****å‰åºéå†ä½ç½®*****
        # åˆ—è¡¨æœ€å·¦ä¾§å°±æ˜¯æ ¹èŠ‚ç‚¹
        first = nodes.popleft()
        if first == self.NULL:
            return None
        root = TreeNode(int(first))
        # *********************

        root.left = self._deserialize(nodes)
        root.right = self._deserialize(nodes)

        return root
```

</div></div>

<div data-tab-item="java" class="tab-item active" data-tab-group="default"><div class="highlight">

```java
public class Codec {
    String SEP = ",";
    String NULL = "#";

    // ä¸»å‡½æ•°ï¼Œå°†äºŒå‰æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²
    public String serialize(TreeNode root) {
        StringBuilder sb = new StringBuilder();
        serialize(root, sb);
        return sb.toString();
    }

    // è¾…åŠ©å‡½æ•°ï¼Œå°†äºŒå‰æ ‘å­˜å…¥ StringBuilder
    void serialize(TreeNode root, StringBuilder sb) {
        if (root == null) {
            sb.append(NULL).append(SEP);
            return;
        }

        // *****å‰åºéå†ä½ç½®*****
        sb.append(root.val).append(SEP);
        // *********************

        serialize(root.left, sb);
        serialize(root.right, sb);
    }

    // ä¸»å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„
    public TreeNode deserialize(String data) {
        // å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
        LinkedList<String> nodes = new LinkedList<>();
        for (String s : data.split(SEP)) {
            nodes.addLast(s);
        }
        return deserialize(nodes);
    }

    // è¾…åŠ©å‡½æ•°ï¼Œé€šè¿‡ nodes åˆ—è¡¨æ„é€ äºŒå‰æ ‘
    TreeNode deserialize(LinkedList<String> nodes) {
        if (nodes.isEmpty()) return null;

        // *****å‰åºéå†ä½ç½®*****
        // åˆ—è¡¨æœ€å·¦ä¾§å°±æ˜¯æ ¹èŠ‚ç‚¹
        String first = nodes.removeFirst();
        if (first.equals(NULL)) return null;
        TreeNode root = new TreeNode(Integer.parseInt(first));
        // *********************

        root.left = deserialize(nodes);
        root.right = deserialize(nodes);

        return root;
    }
}
```

</div></div>

<div data-tab-item="go" class="tab-item " data-tab-group="default"><div class="highlight">

```go
// æ³¨æ„ï¼šgo ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ã€‚
// æœ¬ä»£ç çš„æ­£ç¡®æ€§å·²é€šè¿‡åŠ›æ‰£éªŒè¯ï¼Œä½†å¯èƒ½ç¼ºå¤±æ³¨é‡Šã€‚å¿…è¦æ—¶è¯·å¯¹ç…§æˆ‘çš„ java ä»£ç æŸ¥çœ‹ã€‚

type Codec struct {
    SEP  string
    NULL string
}

func Constructor() Codec {
    return Codec{
        SEP:  ",",
        NULL: "#",
    }
}

// ä¸»å‡½æ•°ï¼Œå°†äºŒå‰æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²
func (c *Codec) serialize(root *TreeNode) string {
    var sb strings.Builder
    c.serializeHelper(root, &sb)
    return sb.String()
}

// è¾…åŠ©å‡½æ•°ï¼Œå°†äºŒå‰æ ‘å­˜å…¥ StringBuilder
func (c *Codec) serializeHelper(root *TreeNode, sb *strings.Builder) {
    if root == nil {
        sb.WriteString(c.NULL)
        sb.WriteString(c.SEP)
        return
    }

    // *****å‰åºéå†ä½ç½®*****
    sb.WriteString(strconv.Itoa(root.Val))
    sb.WriteString(c.SEP)
    // *********************

    c.serializeHelper(root.Left, sb)
    c.serializeHelper(root.Right, sb)
}

// ä¸»å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„
func (c *Codec) deserialize(data string) *TreeNode {
    // å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
    nodes := strings.Split(data, c.SEP)
    nodeList := list.New()
    for _, s := range nodes {
        nodeList.PushBack(s)
    }
    return c.deserializeHelper(nodeList)
}

// è¾…åŠ©å‡½æ•°ï¼Œé€šè¿‡ nodes åˆ—è¡¨æ„é€ äºŒå‰æ ‘
func (c *Codec) deserializeHelper(nodes *list.List) *TreeNode {
    if nodes.Len() == 0 {
        return nil
    }

    // *****å‰åºéå†ä½ç½®*****
    // åˆ—è¡¨æœ€å·¦ä¾§å°±æ˜¯æ ¹èŠ‚ç‚¹
    first := nodes.Remove(nodes.Front()).(string)
    if first == c.NULL {
        return nil
    }
    val, _ := strconv.Atoi(first)
    root := &TreeNode{Val: val}
    // *********************

    root.Left = c.deserializeHelper(nodes)
    root.Right = c.deserializeHelper(nodes)

    return root
}
```

</div></div>

<div data-tab-item="javascript" class="tab-item " data-tab-group="default"><div class="highlight">

```javascript
// æ³¨æ„ï¼šjavascript ä»£ç ç”± chatGPTğŸ¤– æ ¹æ®æˆ‘çš„ java ä»£ç ç¿»è¯‘ã€‚
// æœ¬ä»£ç çš„æ­£ç¡®æ€§å·²é€šè¿‡åŠ›æ‰£éªŒè¯ï¼Œä½†å¯èƒ½ç¼ºå¤±æ³¨é‡Šã€‚å¿…è¦æ—¶è¯·å¯¹ç…§æˆ‘çš„ java ä»£ç æŸ¥çœ‹ã€‚

var Codec = function() {
    const SEP = ",";
    const NULL = "#";

    // ä¸»å‡½æ•°ï¼Œå°†äºŒå‰æ ‘åºåˆ—åŒ–ä¸ºå­—ç¬¦ä¸²
    this.serialize = function(root) {
        let sb = [];
        serializeHelper(root, sb);
        return sb.join(SEP);
    };

    // è¾…åŠ©å‡½æ•°ï¼Œå°†äºŒå‰æ ‘å­˜å…¥ StringBuilder
    const serializeHelper = function(root, sb) {
        if (root === null) {
            sb.push(NULL);
            return;
        }

        // *****å‰åºéå†ä½ç½®*****
        sb.push(root.val);
        // *********************

        serializeHelper(root.left, sb);
        serializeHelper(root.right, sb);
    };

    // ä¸»å‡½æ•°ï¼Œå°†å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸ºäºŒå‰æ ‘ç»“æ„
    this.deserialize = function(data) {
        // å°†å­—ç¬¦ä¸²è½¬åŒ–æˆåˆ—è¡¨
        let nodes = data.split(SEP);
        return deserializeHelper(nodes);
    };

    // è¾…åŠ©å‡½æ•°ï¼Œé€šè¿‡ nodes åˆ—è¡¨æ„é€ äºŒå‰æ ‘
    const deserializeHelper = function(nodes) {
        if (nodes.length === 0) return null;

        // *****å‰åºéå†ä½ç½®*****
        // åˆ—è¡¨æœ€å·¦ä¾§å°±æ˜¯æ ¹èŠ‚ç‚¹
        let first = nodes.shift();
        if (first === NULL) return null;
        let root = new TreeNode(parseInt(first));
        // *********************

        root.left = deserializeHelper(nodes);
        root.right = deserializeHelper(nodes);

        return root;
    };
};

// Helper function to create a new TreeNode
function TreeNode(val) {
    this.val = val;
    this.left = this.right = null;
}

// Export the Codec class to be used in LeetCode
var deserialize = function(data) {
    const codec = new Codec();
    return codec.deserialize(data);
};

var serialize = function(root) {
    const codec = new Codec();
    return codec.serialize(root);
};

module.exports = { serialize, deserialize };
```

</div></div>
</div></div>

**ç±»ä¼¼é¢˜ç›®**ï¼š
  - [449. åºåˆ—åŒ–å’Œååºåˆ—åŒ–äºŒå‰æœç´¢æ ‘ ğŸŸ ](/problems/serialize-and-deserialize-bst)
  - [å‰‘æŒ‡ Offer 37. åºåˆ—åŒ–äºŒå‰æ ‘ ğŸ”´](/problems/xu-lie-hua-er-cha-shu-lcof)
  - [å‰‘æŒ‡ Offer II 048. åºåˆ—åŒ–ä¸ååºåˆ—åŒ–äºŒå‰æ ‘ ğŸ”´](/problems/h54YBf)

</div>

</details>
</div>

