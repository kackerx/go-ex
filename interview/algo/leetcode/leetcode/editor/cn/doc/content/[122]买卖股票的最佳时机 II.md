<p>给你一个整数数组 <code>prices</code> ，其中&nbsp;<code>prices[i]</code> 表示某支股票第 <code>i</code> 天的价格。</p>

<p>在每一天，你可以决定是否购买和/或出售股票。你在任何时候&nbsp;<strong>最多</strong>&nbsp;只能持有 <strong>一股</strong> 股票。你也可以先购买，然后在 <strong>同一天</strong> 出售。</p>

<p>返回 <em>你能获得的 <strong>最大</strong> 利润</em>&nbsp;。</p>

<p>&nbsp;</p>

<p><strong>示例 1：</strong></p>

<pre>
<strong>输入：</strong>prices = [7,1,5,3,6,4]
<strong>输出：</strong>7
<strong>解释：</strong>在第 2 天（股票价格 = 1）的时候买入，在第 3 天（股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5 - 1 = 4。
随后，在第 4 天（股票价格 = 3）的时候买入，在第 5 天（股票价格 = 6）的时候卖出, 这笔交易所能获得利润 = 6 - 3 = 3。
最大总利润为 4 + 3 = 7 。</pre>

<p><strong>示例 2：</strong></p>

<pre>
<strong>输入：</strong>prices = [1,2,3,4,5]
<strong>输出：</strong>4
<strong>解释：</strong>在第 1 天（股票价格 = 1）的时候买入，在第 5 天 （股票价格 = 5）的时候卖出, 这笔交易所能获得利润 = 5 - 1 = 4。
最大总利润为 4 。</pre>

<p><strong>示例&nbsp;3：</strong></p>

<pre>
<strong>输入：</strong>prices = [7,6,4,3,1]
<strong>输出：</strong>0
<strong>解释：</strong>在这种情况下, 交易无法获得正利润，所以不参与交易可以获得最大利润，最大利润为 0。</pre>

<p>&nbsp;</p>

<p><strong>提示：</strong></p>

<ul> 
 <li><code>1 &lt;= prices.length &lt;= 3 * 10<sup>4</sup></code></li> 
 <li><code>0 &lt;= prices[i] &lt;= 10<sup>4</sup></code></li> 
</ul>

<details><summary><strong>Related Topics</strong></summary>贪心 | 数组 | 动态规划</details><br>

<div>👍 2576, 👎 0<span style='float: right;'><span style='color: gray;'><a href='https://github.com/labuladong/fucking-algorithm/issues' target='_blank' style='color: lightgray;text-decoration: underline;'>bug 反馈</a> | <a href='https://labuladong.online/algo/fname.html?fname=jb插件简介' target='_blank' style='color: lightgray;text-decoration: underline;'>使用指南</a> | <a href='https://labuladong.online/algo/' target='_blank' style='color: lightgray;text-decoration: underline;'>更多配套插件</a></span></span></div>

<div id="labuladong"><hr>

**通知：网站新增大量习题，新增排序算法专题及可视化，具体请查看 [网站更新日志](https://labuladong.online/algo/changelog/website/)~**



<p><strong><a href="https://labuladong.online/algo/slug.html?slug=best-time-to-buy-and-sell-stock-ii" target="_blank">⭐️labuladong 题解</a></strong></p>
<details><summary><strong>labuladong 思路</strong></summary>

<div id="labuladong_solution_zh">

## 基本思路

**提示：股票系列问题有共通性，但难度较大，初次接触此类问题的话很难看懂下述思路，建议直接看 [详细题解](https://labuladong.online/algo/dynamic-programming/stock-problem-summary/)。**

股票系列问题状态定义：

```python
dp[i][k][0 or 1]
0 <= i <= n - 1, 1 <= k <= K
n 为天数，大 K 为交易数的上限，0 和 1 代表是否持有股票。
```

股票系列问题通用状态转移方程和 base case：

```python
状态转移方程：
dp[i][k][0] = max(dp[i-1][k][0], dp[i-1][k][1] + prices[i])
dp[i][k][1] = max(dp[i-1][k][1], dp[i-1][k-1][0] - prices[i])

base case：
dp[-1][...][0] = dp[...][0][0] = 0
dp[-1][...][1] = dp[...][0][1] = -infinity
```

特化到 `k` 无限制的情况，状态转移方程如下：

```python
dp[i][0] = max(dp[i-1][0], dp[i-1][1] + prices[i])
dp[i][1] = max(dp[i-1][1], dp[i-1][0] - prices[i])
```

详细思路解析和空间复杂度优化的解法见详细题解。

- **详细题解**：
  - [一个方法团灭 LeetCode 股票买卖问题](https://labuladong.online/algo/dynamic-programming/stock-problem-summary/)

</div>

<div id="solution">

## 解法代码



<div class="tab-panel"><div class="tab-nav">
<button data-tab-item="cpp" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">cpp🤖</button>

<button data-tab-item="python" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">python🤖</button>

<button data-tab-item="java" class="tab-nav-button btn active" data-tab-group="default" onclick="switchTab(this)">java🟢</button>

<button data-tab-item="go" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">go🤖</button>

<button data-tab-item="javascript" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">javascript🤖</button>
</div><div class="tab-content">
<div data-tab-item="cpp" class="tab-item " data-tab-group="default"><div class="highlight">

```cpp
// 注意：cpp 代码由 chatGPT🤖 根据我的 java 代码翻译。
// 本代码的正确性已通过力扣验证，如有疑问，可以对照我的 java 代码查看。

class Solution {
public:
    int maxProfit(vector<int>& prices) {
        int n = prices.size();
        vector<vector<int>> dp(n, vector<int>(2));
        for (int i = 0; i < n; i++) {
            if (i - 1 == -1) {
                // base case
                dp[i][0] = 0;
                dp[i][1] = -prices[i];
                continue;
            }
            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
            dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] - prices[i]);
        }
        return dp[n - 1][0];
    }
};
```

</div></div>

<div data-tab-item="python" class="tab-item " data-tab-group="default"><div class="highlight">

```python
# 注意：python 代码由 chatGPT🤖 根据我的 java 代码翻译。
# 本代码的正确性已通过力扣验证，如有疑问，可以对照我的 java 代码查看。

class Solution:
    def maxProfit(self, prices):
        n = len(prices)
        dp = [[0] * 2 for _ in range(n)]
        for i in range(n):
            if i - 1 == -1:
                # base case
                dp[i][0] = 0
                dp[i][1] = -prices[i]
                continue
            dp[i][0] = max(dp[i - 1][0], dp[i - 1][1] + prices[i])
            dp[i][1] = max(dp[i - 1][1], dp[i - 1][0] - prices[i])
        return dp[n - 1][0]
```

</div></div>

<div data-tab-item="java" class="tab-item active" data-tab-group="default"><div class="highlight">

```java
class Solution {
    public int maxProfit(int[] prices) {
        int n = prices.length;
        int[][] dp = new int[n][2];
        for (int i = 0; i < n; i++) {
            if (i - 1 == -1) {
                // base case
                dp[i][0] = 0;
                dp[i][1] = -prices[i];
                continue;
            }
            dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
            dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);
        }
        return dp[n - 1][0];
    }
}
```

</div></div>

<div data-tab-item="go" class="tab-item " data-tab-group="default"><div class="highlight">

```go
// 注意：go 代码由 chatGPT🤖 根据我的 java 代码翻译。
// 本代码的正确性已通过力扣验证，如有疑问，可以对照我的 java 代码查看。

func maxProfit(prices []int) int {
    n := len(prices)
    dp := make([][2]int, n)
    for i := 0; i < n; i++ {
        if i - 1 == -1 {
            // base case
            dp[i][0] = 0
            dp[i][1] = -prices[i]
            continue
        }
        dp[i][0] = max(dp[i-1][0], dp[i-1][1]+prices[i])
        dp[i][1] = max(dp[i-1][1], dp[i-1][0]-prices[i])
    }
    return dp[n-1][0]
}

func max(a, b int) int {
    if a > b {
        return a
    }
    return b
}
```

</div></div>

<div data-tab-item="javascript" class="tab-item " data-tab-group="default"><div class="highlight">

```javascript
// 注意：javascript 代码由 chatGPT🤖 根据我的 java 代码翻译。
// 本代码的正确性已通过力扣验证，如有疑问，可以对照我的 java 代码查看。

var maxProfit = function(prices) {
    let n = prices.length;
    let dp = Array.from({ length: n }, () => Array(2).fill(0));
    for (let i = 0; i < n; i++) {
        if (i - 1 === -1) {
            // base case
            dp[i][0] = 0;
            dp[i][1] = -prices[i];
            continue;
        }
        dp[i][0] = Math.max(dp[i - 1][0], dp[i - 1][1] + prices[i]);
        dp[i][1] = Math.max(dp[i - 1][1], dp[i - 1][0] - prices[i]);
    }
    return dp[n - 1][0];
};
```

</div></div>
</div></div>

<hr /><details open hint-container details><summary style="font-size: medium"><strong>👾👾 算法可视化 👾👾</strong></summary><div id="data_best-time-to-buy-and-sell-stock-ii" data="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"></div><div class="resizable aspect-ratio-container" style="height: 100%;">
<div id="iframe_best-time-to-buy-and-sell-stock-ii"></div></div>
</details><hr /><br />

</div>

</details>
</div>

