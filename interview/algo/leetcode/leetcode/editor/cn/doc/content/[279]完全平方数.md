<p>给你一个整数 <code>n</code> ，返回 <em>和为 <code>n</code> 的完全平方数的最少数量</em> 。</p>

<p><strong>完全平方数</strong> 是一个整数，其值等于另一个整数的平方；换句话说，其值等于一个整数自乘的积。例如，<code>1</code>、<code>4</code>、<code>9</code> 和 <code>16</code> 都是完全平方数，而 <code>3</code> 和 <code>11</code> 不是。</p>

<p>&nbsp;</p>

<p><strong>示例&nbsp;1：</strong></p>

<pre>
<strong>输入：</strong>n = <span><code>12</code></span>
<strong>输出：</strong>3 
<strong>解释：</strong><span><code>12 = 4 + 4 + 4</code></span></pre>

<p><strong>示例 2：</strong></p>

<pre>
<strong>输入：</strong>n = <span><code>13</code></span>
<strong>输出：</strong>2
<strong>解释：</strong><span><code>13 = 4 + 9</code></span></pre>

&nbsp;

<p><strong>提示：</strong></p>

<ul> 
 <li><code>1 &lt;= n &lt;= 10<sup>4</sup></code></li> 
</ul>

<details><summary><strong>Related Topics</strong></summary>广度优先搜索 | 数学 | 动态规划</details><br>

<div>👍 2051, 👎 0<span style='float: right;'><span style='color: gray;'><a href='https://github.com/labuladong/fucking-algorithm/issues' target='_blank' style='color: lightgray;text-decoration: underline;'>bug 反馈</a> | <a href='https://labuladong.online/algo/fname.html?fname=jb插件简介' target='_blank' style='color: lightgray;text-decoration: underline;'>使用指南</a> | <a href='https://labuladong.online/algo/' target='_blank' style='color: lightgray;text-decoration: underline;'>更多配套插件</a></span></span></div>

<div id="labuladong"><hr>

**通知：网站新增大量习题，新增排序算法专题及可视化，具体请查看 [网站更新日志](https://labuladong.online/algo/changelog/website/)~**

<details><summary><strong>labuladong 思路</strong></summary>

<div id="labuladong_solution_zh">

## 基本思路

这道题有一些比较有技巧性的数学方法，我这里不探讨数学，就用通用的动态规划思路解决：

题目问和为 `n` 的平方数的最小数量，那么我可以根据和为 `n-1x1, n-2x2, n-3x3...` 的平方数的最小数量推导出来。

如果这个思路你绕不过来，我再给你变化下就更容易理解了，这个问题完全可以变化成 [动态规划详解](https://labuladong.online/algo/essential-technique/dynamic-programming-framework/) 中讲的 [322. 零钱兑换](/problems/coin-change) 问题：

给你一个目标金额 `n`，和一个若干硬币的面额 `coins = 1,4,9,16...`，问你最少需要几枚硬币凑出这个金额（因为包含面值为 1 的硬币，所以不存在凑不出来的情况）。

这样变个说法理解题目，是不是就豁然开朗了？具体解法看代码吧，复杂度是 `O(N*sqrt(N))`，也是不错的。

- **详细题解**：
  - [【强化练习】数学技巧相关习题](https://labuladong.online/algo/problem-set/math-tricks/)

</div>

<div id="solution">

## 解法代码



<div class="tab-panel"><div class="tab-nav">
<button data-tab-item="cpp" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">cpp🤖</button>

<button data-tab-item="python" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">python🤖</button>

<button data-tab-item="java" class="tab-nav-button btn active" data-tab-group="default" onclick="switchTab(this)">java🟢</button>

<button data-tab-item="go" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">go🤖</button>

<button data-tab-item="javascript" class="tab-nav-button btn " data-tab-group="default" onclick="switchTab(this)">javascript🤖</button>
</div><div class="tab-content">
<div data-tab-item="cpp" class="tab-item " data-tab-group="default"><div class="highlight">

```cpp
// 注意：cpp 代码由 chatGPT🤖 根据我的 java 代码翻译。
// 本代码的正确性已通过力扣验证，如有疑问，可以对照我的 java 代码查看。

class Solution {
public:
    int numSquares(int n) {
        // 定义：和为 i 的平方数的最小数量是 dp[i]
        vector<int> dp(n + 1);
        // base case
        dp[0] = 0;
        // 状态转移方程
        for (int i = 1; i <= n; i++) {
            dp[i] = i; // 最坏的情况就是每个数都是 1，最多也就 i 个数
            for (int j = 1; j * j <= i; j++) {
                // i - j * j 只要再加一个平方数 j * j 即可凑出 i
                dp[i] = min(dp[i], dp[i - j * j] + 1);
            }
        }
        return dp[n];
    }
};
```

</div></div>

<div data-tab-item="python" class="tab-item " data-tab-group="default"><div class="highlight">

```python
# 注意：python 代码由 chatGPT🤖 根据我的 java 代码翻译。
# 本代码的正确性已通过力扣验证，如有疑问，可以对照我的 java 代码查看。

class Solution:
    def numSquares(self, n: int) -> int:
        # 定义：和为 i 的平方数的最小数量是 dp[i]
        dp = [float('inf')] * (n+1)
        # base case
        dp[0] = 0
        # 状态转移方程
        for i in range(1, n+1):
            for j in range(1, int(i**0.5)+1):
                # i - j * j 只要再加一个平方数 j * j 即可凑出 i
                dp[i] = min(dp[i], dp[i - j*j] + 1)
        return dp[n]
```

</div></div>

<div data-tab-item="java" class="tab-item active" data-tab-group="default"><div class="highlight">

```java
class Solution {
    public int numSquares(int n) {
        // 定义：和为 i 的平方数的最小数量是 dp[i]
        int[] dp = new int[n + 1];
        Arrays.fill(dp, Integer.MAX_VALUE);
        // base case
        dp[0] = 0;
        // 状态转移方程
        for (int i = 1; i <= n; i++) {
            for (int j = 1; j * j <= i; j++) {
                // i - j * j 只要再加一个平方数 j * j 即可凑出 i
                dp[i] = Math.min(dp[i], dp[i - j * j] + 1);
            }
        }
        return dp[n];
    }
}
```

</div></div>

<div data-tab-item="go" class="tab-item " data-tab-group="default"><div class="highlight">

```go
// 注意：go 代码由 chatGPT🤖 根据我的 java 代码翻译。
// 本代码的正确性已通过力扣验证，如有疑问，可以对照我的 java 代码查看。

func numSquares(n int) int {
    // 定义：和为 i 的平方数的最小数量是 dp[i]
    dp := make([]int, n+1)
    // base case
    dp[0] = 0
    // 状态转移方程
    for i := 1; i <= n; i++ {
        dp[i] = i
        for j := 1; j*j <= i; j++ {
            dp[i] = min(dp[i], dp[i-j*j]+1)
        }
    }
    return dp[n]
}

func min(a, b int) int {
    if a < b {
        return a
    }
    return b
}
```

</div></div>

<div data-tab-item="javascript" class="tab-item " data-tab-group="default"><div class="highlight">

```javascript
// 注意：javascript 代码由 chatGPT🤖 根据我的 java 代码翻译。
// 本代码的正确性已通过力扣验证，如有疑问，可以对照我的 java 代码查看。

var numSquares = function(n) {
    // 定义：和为 i 的平方数的最小数量是 dp[i]
    const dp = new Array(n+1).fill(0);
    // base case
    dp[0] = 0;
    // 状态转移方程
    for (let i = 1; i <= n; i++) {
        dp[i] = i;
        for (let j = 1; j * j <= i; j++) {
            // i - j * j 只要再加一个平方数 j * j 即可凑出 i
            dp[i] = Math.min(dp[i], dp[i - j * j] + 1);
        }
    }
    return dp[n];
};
```

</div></div>
</div></div>

<hr /><details open hint-container details><summary style="font-size: medium"><strong>🌟🌟 算法可视化 🌟🌟</strong></summary><div id="data_perfect-squares" data="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"></div><div class="resizable aspect-ratio-container" style="height: 100%;">
<div id="iframe_perfect-squares"></div></div>
</details><hr /><br />

</div>

</details>
</div>

